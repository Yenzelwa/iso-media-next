(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[560],{1073:function(e,t,s){Promise.resolve().then(s.bind(s,2854))},2854:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(9268),r=s(6006),i=s(6008),n=s(4751),l=s(1712),o=s(4606),d=s(9631),c=s(447),u=s(5422);let m={providers:[(0,d.Z)({name:"credentials",credentials:{email:{label:"Email",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){if(console.log("Received credentials:",e),e&&e.email&&e.password)try{let t=await c.Z.post("https://localhost:7263/api/account/login",{email:e.email,password:e.password},{headers:{"Content-Type":"application/json"},httpsAgent:new u.Agent({rejectUnauthorized:!1})});if(200===t.status&&t.data){console.log("Data from API:",t.data);let e={id:t.data.profile.id.toString(),name:t.data.profile.firstName+" "+t.data.profile.lastName,email:t.data.profile.email,subscriptionPlan:{id:1,name:"Monthly"},status:"Pending"};return l.Z.set("userProfile",JSON.stringify(e),{expires:7}),e}}catch(e){console.error("Error during authentication:",e)}return null}})],callbacks:{async jwt(e){let{token:t,user:s}=e;return s&&(t.id=s.id,t.email=s.email||"",t.name=s.name||""),t},async session(e){let{session:t,token:s}=e;return t.user&&(t.user.name=s.name,t.user.email=s.email),t}}};async function f(){let e=await (0,o.getServerSession)(m);if(!e)return(0,i.redirect)("/login")}let h=()=>{let[e,t]=(0,r.useState)("Monthly"),s=(0,i.useRouter)(),[d,c]=(0,r.useState)(1),{data:u}=(0,n.useSession)(),[h,x]=(0,r.useState)(),p=e=>new Promise(t=>setTimeout(t,e));return(0,r.useEffect)(()=>{let e=async()=>{await f(),await (0,o.getServerSession)(m),await p(1e3)};e()},[]),(0,r.useEffect)(()=>{let e=l.Z.get("userProfile");if(e){let t=JSON.parse(e);x(t),c(t.plan.id)}},[]),(0,r.useEffect)(()=>{let e=l.Z.get("userProfile");if(e){let t=JSON.parse(e);t.plan.id=d,l.Z.set("userProfile",JSON.stringify(t))}},[d]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:" py-12",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"lg:text-center",children:[(0,a.jsx)("p",{className:"text-gray-500",children:"STEP 2 OF 3"}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Choose your plan"}),(0,a.jsx)("h3",{className:"text-lg text-gray mb-6",children:"IsolakwaMUNTU is committed to give you all you need to awaken your inner child."})]}),(0,a.jsx)("div",{className:"mt-16 grid grid-cols-1 md:grid-cols-2 gap-12",children:[{id:1,title:"Billed Monthly",price:"$7.99",type:"Monthly",features:["Stream on 1 device","Instant access to over 1500 unique videos","Access 30+ years of David Icke's Content","Watch on your phone and TV","\xa31.99 for your first month","Renews at \xa37.99"]},{id:2,title:"Billed Yearly",price:"$99.99",type:"Yearly",features:["Stream on 4 devices","All premium features included","Save 17% with annual billing","24/7 customer support","\xa31.99 for your first month","Renews at \xa37.99","Instant access to over 1500 unique videos","Access 30+ years of David Icke's Content"]}].map(e=>(0,a.jsxs)("div",{className:"rounded-lg bg-dark p-8 shadow-md ".concat(d===e.id?"border-2 border-red":""),onClick:()=>{c(e.id)},children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"font-medium text-white",children:e.title}),(0,a.jsx)("div",{className:"mt-4 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-5xl font-extrabold tracking-tight text-red",children:e.price})})]}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)("ul",{children:e.features.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start mt-2",children:[(0,a.jsx)("svg",{className:"flex-shrink-0 h-6 w-6 text-green",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),(0,a.jsx)("span",{className:"ml-3 text-base text-gray",children:e})]},t))})})]},e.id))}),(0,a.jsx)("div",{className:"mt-8 flex justify-center",children:(0,a.jsx)("button",{type:"button",className:"w-1/2 flex justify-center items-center px-6 py-3 border border-transparent rounded-md text-base font-medium text-white bg-red hover:bg-red focus:outline-none focus:border-red focus:shadow-outline-red transition duration-150 ease-in-out",onClick:()=>s.push("/billing"),children:"Continue"})})]})})})};var x=h}},function(e){e.O(0,[717,751,447,835,754,667,139,744],function(){return e(e.s=1073)}),_N_E=e.O()}]);